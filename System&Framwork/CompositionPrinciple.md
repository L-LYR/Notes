# 计算机组成原理

## 冯·诺依曼结构计算机工作原理及层次结构分析

### 工作原理

存储程序：将程序存放在计算机的存储器中（存储系统构建与快速访问）

程序控制： 按指令地址访问存储器并取出指令，经译码依次产生指令执行所需的控制信号，实现对计算的控制，完成指令的功能（指令系统、控制器设计等）

### 组成

硬件：

- 主机：CPU （运算器 + 控制器）、内存
  - 运算器ALU：加、减、乘、除、与、或、非、移位等操作
  - 控制器：产生指令执行过程所需要的所有控制信号，控制相关功能部件执行相应操作（产生控制信号的依据：指令、状态、时序）
  - 存储器：存储原程序、原数据、运算中间结果（按地址访问，读/写数据）
- 外设：输入设备、输出设备、外存储器
- 总线：地址线、数据线、控制线

软件：

- 核心：算法
- 表现形式：程序和数据
- 可运行的思想和内容的数字化

## 计算机系统性能评价

### 非时间指标

#### 机器字长

- 指机器一次能处理的二进制位数
- 由加法器、寄存器的位数决定
-  一般与内部寄存器的位数相等（字长）
- 字长越长，表示数据的范围就越大，精确度越高
- 目前常见的有32位和64位字长 

#### 总线宽度

- 数据总线一次能并行传送的最大信息的位数
- 一般指运算器与存储器之间的数据总线位数
- 有些计算机内部与外部数据总线宽度不一致
  - 8086、80286、80386内外数据总线等宽
  - 8088、80386SX 外部总线宽度8位内部总线宽度16位
  - Pentium外总线64位，内总线32位（两条32位流水线）

#### 主存容量与存储带宽

- 主存容量：是指一台计算机主存所包含的存储单元总数
- 存储带宽： 指单位时间内与主存交换的二进制信息量，常用单位B/s（字节/秒）。（影响存储带宽的指标包括数据位宽和数据传输速率）。

### 时间指标

![](./img/cp3.png)

#### 主频f/时钟周期T , 外频、倍频

- 主频f：指CPU内核工作的时钟频率，即CPU内数字脉冲信号振荡的速率，与CPU实际的运算能力之间不是唯一的、直接关系
- 时钟周期T：也称节拍周期，是计算机中最基本的、最小的时间单位。在一个时钟周期内，CPU仅完成一个最基本的动作
- f=1/T
- 外频：指CPU(内存)与主板之间同步的时钟频率(系统总线的工作频率)
- 倍频：CPU主频与外频之间的倍数
- 超频方法：调节倍频系数

#### CPI

- 执行一条指令(平均)需要的时钟周期数(即T周期的个数)(Clock cycles Per Instruction)
  - 单条指令CPI 、一段程序中所有指令的CPI、指令系统CPI
- CPI=程序中所有指令的时钟周期数之和/程序指令总数=（程序中各类指令的CPI*程序中该类指令的比例）之和

#### IPC

- 每个时钟周期内执行的指令条数(并行)(Clock cycles Per Instruction)
- 实际上频率和IPC在真正影响CPU性能。
  - 准确的CPU性能判断标准应该是：CPU性能=IPC(CPU每一时钟周期内所执行的指令多少)*频率(MHz时钟速度)

#### MIPS

- 每秒钟CPU能执行的指令总条数 (单位：百万条/秒)(Million Instructions Per Second)
- ![](./img/cp1.png)

#### CPU时间

- 执行一段程序所需的时间(CPU时间+ I/O时间 + 存储访问时间+ 各类排队时延等)
- CPU时间 = 程序中所有指令的时钟周期数之和 * T = 程序中所有指令的时钟周期数之和 / f
- ![](./img/cp2.png)