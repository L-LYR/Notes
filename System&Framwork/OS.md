[toc]

# 操作系统

## 概述

### 操作系统在计算机系统中的位置及作用

- 位置：介于裸机和应用程序之间。
- 作用：
  - 硬件：控制CPU、访问存储器、设备驱动、中断处理
  - 软件：控制、管理、提供方便的用户界面和优质服务

### 存储程序式计算机的结构与特点

- 基本部件：CPU、存储器、IO设备
- 特点：集中顺序过程控制
  - 过程性： 模拟人们手工操作
  - 集中控制：由CPU集中管理
  - 顺序性：程序计数器
- 与操作系统的矛盾：
  - 计算机系统结构是顺序计算模型
  - 操作系统是并行计算模型
- 解决方法：
  - 多道程序设计技术
  - 分时技术
  - 资源分配与调度

### 操作系统的形成过程

- 手工操作阶段
  - 无任何软件
  - 人工干预
  - 独占性
  - 串行性
- 批处理阶段
  - 联机批处理
    - 监督程序&作业自动过渡
    - 问题：高速CPU与低速IO的矛盾
    - 解决办法：卫星机负责IO
  - 脱机批处理
    - 主机与卫星机并行操作
    - 问题：调度不灵活&保护问题
    - 解决办法：通道技术与中断技术
- 执行系统
  - 借助于通道与中断技术，由主机控制I/O工作。原有的监督程序不仅要负责调度作业自动地运行，而且还要提供I/O控制功能。它常驻主存，称为执行系统。
  - 主机与外设并行操作，增强了保护能力
  - 基本功能：IO控制功能与调度功能
  - 问题：主机与外设的并行是有限度的，还依赖于程序运行的特征。

### 操作系统的定义与特征

- 资源共享：多个计算任务对计算机系统资源的共同享用
- 资源竞争：多个计算任务对计算机系统资源的争夺

#### 定义

操作系统是一个大型的程序系统，它负责计算机系统软、硬件资源的分配；控制和协调并发活动；提供用户接口，使用户获得良好的工作环境。

#### 特征

- 并发：能处理多个同时性活动的能力
- 共享：多个计算任务对系统资源的共同享用
- 不确定性：操作系统能处理大量的、随机的事件序列，使各用户的计算任务正确地完成

### 操作系统的基本功能（资源管理功能）

- 处理机管理
  - 提出进程调度策略
  - 给出进程调度算法
  - 进行处理机的分派
- 存储器管理
  - 存储分配和存储无关性：确定各应用程序在主存中的位置及所占区域大小；应用程序无需关注存储细节，有存储管理模块提供地址重定位能力。
  - 存储保护：系统提供基址、界限寄存器等存储保护方法，使各应用程序相互隔离。
  - 存储扩充：系统提供虚拟存储技术，扩大逻辑主存。
- 设备管理
  - 设备无关性：设备无关性是指用户向系统申请和使用的设备与实际操作的设备无关，以达到方便用户、提高设备利用率的目的。
  - 设备分配：操作系统为各应用程序和运行实体分配各种设备。设备分配通常采用三种基本技术：独享、共享及虚拟技术。
  - 设备传输控制：设备的传输控制包括：启动设备、中断处理、结束处理三个方面。
- 信息管理（文件系统）
  - 信息组织
  - 存取方法
  - 文件共享
  - 文件安全
  - 文件完整性
  - 磁盘空间分配

### 操作系统的基本技术

#### 多道程序设计技术

在计算机主存中同时存放几道相互独立的程序。这些程序在管理程序控制之下，相互穿插地运行。当某道程序因某种原因不能继续运行下去时(如等待外部设备传输数据)，管理程序便将另一道程序投入运行。

特征：

1. 多道
2. 宏观上并行
3. 微观上串行

#### 分时技术

所谓分时技术，是把处理机时间划分成很短的时间片(如几百毫秒)轮地分配给各个应用程序使用，如果某个程序在分配的时间片用完之前计算还未完成，该程序就暂时中断，等待下一轮继续计算。

分时处理：一台计算机与许多终端设备连接，终端用户以联机方式使用计算机。　

实时处理：计算机对于外来信息能够在被控对象允许的截止期限(deadline)内作出反应。实时处理以快速反应为特征，对实时信号能在截止期限之内处理并作出反应。实时处理具有实时性和可预测性。

### 操作系统的基本类型

#### 批量操作系统

批量操作系统是操作系统的一种类型。该系统把用户提交的程序组织成作业形式。作业成批送入计算机，然后由作业调度程序自动选择作业，在系统内多道运行。早期计算机一般都配置批量操作系统。

特点：

1. 吞吐率高，多道运行，合理搭配作业
2. 作业周转时间长，用户使用不方便

#### 分时操作系统

分时操作系统是操作系统的另一种类型。它一般采用时间片轮转的办法，使一台计算机同时为多个终端用户服务。该系统对每个用户都能保证足够快的响应时间，并提供交互会话功能。

特点：

1. 并行性
2. 独占性
3. 交互性

#### 实时操作系统

实时操作系统对外部输入的信息，能够在规定的时间内处理完毕并作出反应。

特点：

1. 可靠性和安全性
2. 及时响应

类型：

1. 实时控制：生产过程控制、作战指挥
2. 实时信息处理：订机票、情报检索

- 实时系统：配置了实时操作系统的系统。
  - 分类
    - 硬实时系统：系统必须满足应用程序对截止期限的要求，若错过了截止期
      限，将导致灾难性后果。
    - 软实时系统：系统中截止期限被错过的情况下，只造成系统性能下降而不会带来严重后果。

#### 个人计算机操作系统

略

#### 多处理机系统

多处理机系统也称并行系统或紧耦合系统。

定义：

1. 包含两个或多个功能相当的处理器
2. 所有处理器共享一个公共内存
3. 所有处理器共享I/O通道、控制器和外围设备
4. 由一个操作系统控制

特点：

1. 具有并行处理能力
2. 紧耦合、存在瓶颈、可扩展性差
3. 不支持大规模并行计算、不支持分布处理

#### 网络操作系统

网络操作系统除了具备一般操作系统应具有的功能模块外 (如系统核心、设备管理、存储管理、文件系统等)，还要增加一个网络通信模块。该模块由通信接口中断处理程序、通信控制程序以及各级网络协议软件组成。 

特点：

1. 多个处理部件
2. 无公共内存
3. 具备消息通信机制

局限性：

1. 不能支持透明的资源存取
2. 不能对网络资源进行有效、统一的管理
3. 不能支持合作计算         

#### 分布式系统

定义：

1. 包含多个通用资源部件
2. 这些资源是分布的，并经过通信网络相互作用
3. 有一个分布式操作系统对资源进行全局和动态的管理控制
4. 系统对用户是透明的
5. 所有资源高度自治地工作，而又相互配合

特点：

1. 可扩展性
2. 增加性能
3. 高可靠性