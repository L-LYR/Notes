# 命令行简单入门摘要

## 基本操作

### 文件与目录操作

#### `cd [dst]`

**Change Directory**，跳转，一个非常非常常用的指令。

`[dst]`可以是绝对路径，也可以是相对路径（相对路径包括`..`和`.`，有的还可以使用`...`，依次表示当前目录、当前目录的父目录、当前目录的父目录的父目录），更可以为空（为空则默认为`~`）。

#### `pwd`

**Print Working Directory**，打印当前目录的绝对路径。

#### `ls [para]`

**List**，显示目标列表。

没有参数时，`ls`会按字母排序打印当前目录中所有未隐藏的文件及文件夹。

参数`-F --classify`，在默认功能的基础上在末尾增加文件描述符，比如，对于文件夹则有`/`，对于具有可执行权限的文件则有`*`等等。

参数`-a --all`，打印所有文件及文件夹，包括隐藏的。

参数`-R --recursive`，递归选项，对当前目录进行递归`ls`操作。

参数`-l [pattern]`，输出当前目录下所有文件及文件夹的相关信息，及所谓长列表模式。`[pattern]`是模式匹配（详见下文），如果为空则输出当前目录下的所有文件及文件夹，否则只输出名称符合模式的。该模式打印的信息依次有：类型、权限、硬链接数、归属用户、归属组、字节大小、最后修改时间、名称。

#### `touch [src]`

创建空文件，文件归属于创建者。

#### `cp [para] [src] [dst]`

**Copy**，文件复制。

如果源对象和目标对象都是文件名，那么就会创建一个新文件，有新名称、新修改时间，默认覆盖同名文件，可以用`-i`参数进行强制确认是否覆盖。

如果目标对象是路径，那么相当于拷贝至目标路径下。

如果源对象是路径，那么需要加入参数`-R`进行递归拷贝。

#### `ln [para] [src] [dst]`

**Link**，链接。链接的介绍详见下文。

没有参数时进行硬链接，有参数`-s`则进行符号链接。

链接建立时需要保证源文件存在。

#### `mv [src] [dst]`

**Move**，移动及重命名。

只影响文件名不影响时间戳。

如果源对象和目标对象都是文件名，那么就是重命名操作。

如果目标对象是路径，那么就是移动文件操作。

如果源对象是路径，那么就是移动目录操作。

#### `rm [para] [src]`

**Remove**，删除文件。

参数`-i`，删除前提示是否删除，因为`bash`没有回收站，日常使用时记得加！！。

参数`-f`，强制删除。

参数`-r -R --recursive`，递归删除目录。

#### `mkdir [para] [src]`

**Make Directory**，创建目录。

如果想批量创建目录和子目录需要加参数`-p`，如`mkdir -p NewDir/SubDir`

#### `rmdir [src]`

**Remove Directory**，删除目录。

注意，这个命令只能删除空目录，必须先用`rm`递归删除目录下的全部文件，这样操作之前，请务必用`tree`工具查看目录结构。

#### `file [src]`

查看文件类型及部分信息。

#### `cat [para] [src]`

**Concatenate**，显示文件内容。

参数`-n`，添加行号。

参数`-b`，仅为有文本的行添加行号。

参数`-T`，去除制表符。

#### `more [para] [src]`

分页阅读工具。

#### `less [para] [src]`

更高级的分页阅读工具，涵盖`more`的功能。

#### `tail [para] [src]`

显示文件最后几行的内容，默认10行。

参数`-n [number]`，指定显示行数。

参数`-f`，允许文件被其他进程占用时也可以查看且实时更新。

#### `head [para] [src]`

显示文件开头几行的内容，默认10行。

参数`-n [number]`，指定显示行数。

不支持参数`-f`。

### 检测与管理操作

#### `ps [para]`

**Process State**，查看当前时间点的进程状态。

默认情况下，该命令只显示运行在当前控制台下的属于当前用户的进程信息，包括进程ID（PID）、终端（TTY）、已用CPU时间（TIME）、进程名称（CMD）。

##### Unix风格参数

参数`-e`，显示所有进程。

参数`-f`，显示完整格式输出，额外的信息有如用户ID（UID），父进程ID（PPID），进程生命周期中CPU利用率（C），进程启动时的系统时间（STIME）。

参数`-l`，长列表格式输出，额外的信息有如内核分配给进程的系统标记（F），进程状态（S：正在运行（O operating）、休眠（S sleeping）、可运行并等待运行（R ready）、僵死（Z zombie）、停止（T terminating）），进程优先级（PRI，数字越大优先级越低），谦让度值（NI，用来决定优先级），内存地址（ADDR），需换出时所需交换空间的大小（SZ），休眠的内核函数的地址（WCHAN）。

##### BSD风格参数

参数`l`，大部分同上，但额外的有进程在内存中的大小（VSZ，KB），未换出时占用的物理内存（RSS），进程状态（STAT，双字符状态码，第一个字符即为上述进程状态S，第二个字符进一步说明其状态，如运行于高优先级上（<）、运行于低优先级上（N）、有页面锁定在内存中（L）、控制进程（s）、多线程（l）、运行在前台（+））。

##### GNU风格长参数

参数`--forest`，以ASCII字符画的形式显示进程层级关系。

#### `top`

实时监控进程信息。

#### `kill [para] [PID]`

结束进程。

参数`-l`，显示全部信号名。

参数`-l [info]`，显示信号值。

参数`-s [sig]`或者`-[sig]`，指定发送信号（信号名或者信号值）。常用的有：HUP（1）重启进程、INT（2）非强制结束进程（Ctrl+C）、KILL（9）无条件强制结束进程、TERM（15）正常结束进程（默认信号）。

#### `killall [para] [tar]`

结束进程。

其中`[tar]`为进程名而非进程ID，可使用模式匹配进行批量结束。

参数`-i`，结束进程前询问。

#### `mount [para] [dev] [dir]`

挂载设备。

默认输出挂在设备列表信息，包括设备文件名，虚拟目录挂载点，文件系统类型，已挂载设备的访问状态。

参数`-t [type]`，`[type]`指定磁盘格式化的文件系统类型。通常可以不指定类型，会自动选择正确的类型，或者使用`-t auto`。

参数`-o [option]`，允许挂载文件系统时添加一些额外选项，如只读（`ro`，read-only）、读写（`rw`，read-write）、普通用户（`user`）、挂载一个文件（`loop`）

#### `umount [dir|dev]`

卸载设备。

#### `df`



#### `du`



#### `sort`



## Shell特性

### 模式匹配

常用通配符进行文件名匹配，比如上面所说的`ls`命令。

#### `*`

`*`代表任意多个字符，如`*.log`即表示以`.log`为后缀的文件。

#### `?`

`?`表示任意单个字符，如`file?`可以匹配`file1 file2 file3`等文件。

#### `[...]`

`[...]`代表填写在其中的某个字符，其中可以用`-`来表示范围，用`^`表示不取，如`[0-9]`表示只由数字构成的文件，`*[^.txt]*`表示不是由`.txt`结尾的文件，`f[a-z]ll`可以匹配`fill fell full`。

#### `{...}`

`{...}`表示符合花括号内任意一个模式的文件。比如`{.log, .txt}`匹配后缀为`.txt`或`.log`的文件。

## Linux特性

### 链接

如果需要再系统上维护同一个文件的两份或多份副本，除了保存多份单独的物理文件之外，还可以采用保存一份物理文件副本和多个虚拟副本的方法。所谓虚拟副本就是链接，进一步解释为，目录中指向文件真实位置的占位符，分为符号链接和硬链接。注意不要拷贝链接文件，容易造成混乱。

符号链接事实上就是一个文件，它指向存放在虚拟目录结构中某个地方的另一个文件。两个通过符号链接在一起的文件，彼此的内容并不一样，通过`ls -l`指令可以查看符号链接文件的属性，大小很小，末尾有符号`->`后接目标文件，所以可以理解为Windows下的快捷方式。

硬链接会创建独立的虚拟文件，其中包含了原始文件的信息与位置，但从根本上而言是同一个文件，因此用`ls -l`指令查看二者信息，除了名字不同其他都一样。